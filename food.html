<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>–¢—Ä–µ–∫–µ—Ä –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –∫–∞–ª–æ—Ä–∏–π —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;900&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;900&display=swap');

    body {
      font-family: 'Montserrat', sans-serif;
      background-color: #0a0a0a;
      color: #ffffff;
      margin: 0;
      padding: 20px 10px 40px;
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
      font-weight: 700;
    }

    .card-gradient {
      background: linear-gradient(145deg, #1e1e1e 0%, #2a2a2a 100%);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      border-radius: 20px;
    }

    form.card-gradient {
      padding: 30px 25px;
      max-width: 700px;
      margin: 0 auto 30px;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      color: #ddd;
    }

    select, input[type="number"], input[type="text"] {
      width: 100%;
      background: #1a1a1a;
      border: none;
      border-radius: 12px;
      padding: 10px 14px;
      color: white;
      font-size: 16px;
      box-sizing: border-box;
      transition: 0.3s;
      outline: none;
    }

    select:focus, input[type="number"]:focus, input[type="text"]:focus {
      box-shadow: 0 0 8px #f9cb28;
      border: 1px solid #f9cb28;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 18px;
      margin-bottom: 20px;
    }

    button.btn-primary {
      width: 100%;
      padding: 14px 0;
      font-weight: 700;
      font-size: 18px;
      color: black;
      background: linear-gradient(90deg, #ff4d4d 0%, #f9cb28 100%);
      border: none;
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    button.btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(249, 203, 40, 0.4);
    }

    .table-container {
      max-width: 900px;
      margin: 0 auto 40px;
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      color: #fff;
      font-size: 16px;
    }

    thead tr {
      border-bottom: 2px solid #444;
    }

    th, td {
      padding: 12px 14px;
      text-align: left;
    }

    tbody tr {
      border-bottom: 1px solid #333;
      transition: background-color 0.3s;
    }

    tbody tr:hover {
      background-color: #222;
    }

    tfoot tr {
      border-top: 2px solid #444;
      font-weight: 700;
      color: #f9cb28;
      font-size: 18px;
    }

    .btn-delete {
      background: none;
      border: none;
      color: #ff4d4d;
      font-weight: 700;
      font-size: 18px;
      cursor: pointer;
      transition: color 0.3s;
    }

    .btn-delete:hover {
      color: #ff0000;
    }

    /* –ü—Ä–æ–≥—Ä–µ—Å—Å-–¥–∏–∞–≥—Ä–∞–º–º–∞ */
    .progress-container {
      max-width: 300px;
      margin: 0 auto 40px;
      background: linear-gradient(145deg, #1e1e1e 0%, #2a2a2a 100%);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      text-align: center;
    }

    .progress-text {
      font-weight: 700;
      font-size: 20px;
      margin-top: 15px;
      color: #f9cb28;
    }

    .remaining-text {
      font-size: 16px;
      margin-top: 8px;
      color: #f9cb28;
    }

    .remaining-text.over-limit {
      color: #ff4d4d;
    }

    /* –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ */
    .recommendations {
      max-width: 900px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }

    .recommendation {
      flex: 1 1 260px;
      background: linear-gradient(145deg, #1e1e1e 0%, #2a2a2a 100%);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      border-radius: 15px;
      padding: 20px;
      font-weight: 600;
      text-align: center;
      cursor: default;
      transition: all 0.3s ease;
    }

    .recommendation:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
    }

    .nav-link {
      position: relative;
    }
    
    .nav-link::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: -5px;
      left: 0;
      background: linear-gradient(90deg, #ff4d4d 0%, #f9cb28 100%);
      transition: width 0.3s;
    }
    
    .nav-link:hover::after {
      width: 100%;
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –±–ª–æ–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ü–µ–ª–∏ */
    .goal-container {
      max-width: 700px;
      margin: 0 auto 30px;
      padding: 25px;
    }
    
    .goal-input {
      background: #1a1a1a;
      border: none;
      border-radius: 12px;
      padding: 12px 16px;
      color: white;
      font-size: 18px;
      text-align: center;
      width: 120px;
      margin: 0 10px;
    }
    
    .goal-btn {
      padding: 12px 24px;
      font-weight: 700;
      font-size: 16px;
      color: black;
      background: linear-gradient(90deg, #ff4d4d 0%, #f9cb28 100%);
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .goal-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(249, 203, 40, 0.4);
    }


     @media (max-width: 768px) {
    body {
      padding: 10px 5px 20px;
    }
    
    h2 {
      font-size: 1.8rem;
      margin-bottom: 15px;
    }
    
    .grid-3 {
      grid-template-columns: 1fr;
      gap: 12px;
    }
    
    form.card-gradient {
      padding: 20px 15px;
    }
    
    select, input[type="number"], input[type="text"] {
      padding: 12px 14px;
      font-size: 16px;
    }
    
    button.btn-primary {
      padding: 16px 0;
      font-size: 16px;
    }
    
    .table-container {
      margin: 0 auto 20px;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    table {
      font-size: 14px;
      min-width: 600px;
    }
    
    th, td {
      padding: 8px 10px;
    }
    
    .progress-container {
      max-width: 100%;
      padding: 15px;
    }
    
    .goal-container {
      padding: 15px;
    }
    
    .goal-input {
      width: 100%;
      margin: 0 0 10px 0;
    }
    
    .goal-btn {
      width: 100%;
    }
    
    .recommendation {
      flex: 1 1 100%;
    }
    
    /* –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é */
    .mobile-menu {
      display: none;
      position: fixed;
      top: 60px;
      left: 0;
      right: 0;
      background: #111;
      padding: 15px;
      z-index: 100;
      border-bottom: 1px solid #333;
    }
    
    .mobile-menu.active {
      display: block;
    }
    
    .mobile-menu a {
      display: block;
      padding: 10px 0;
      color: white;
      text-decoration: none;
      border-bottom: 1px solid #222;
    }
    
    .mobile-menu a:last-child {
      border-bottom: none;
    }

  }
  </style>
</head>
<body>

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bg-black py-3 px-6 sticky top-0 z-50 border-b border-gray-800">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
        <div class="flex items-center space-x-2">
            <i class="fas fa-fire text-yellow-500 text-xl"></i>
            <span class="text-xl font-bold bg-gradient-to-r from-red-500 to-yellow-400 bg-clip-text text-transparent">EliteFit</span>
        </div>
        <div class="hidden md:flex space-x-6">
            <a href="index.html" class="nav-link text-white hover:text-yellow-400">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="index.html#calculator" class="nav-link text-white hover:text-yellow-400">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a>
            <a href="index.html#nutrition" class="nav-link text-white hover:text-yellow-400">–ü–∏—Ç–∞–Ω–∏–µ</a>
            <a href="food.html" class="nav-link text-white hover:text-yellow-400">–ï–¥–∞ –∑–∞ –¥–µ–Ω—å</a>
            <a href="index.html#workouts" class="nav-link text-white hover:text-yellow-400">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</a>
            <a href="index.html#personal-approach" class="nav-link text-white hover:text-yellow-400 transition duration-300">–°–æ–æ–±—â–µ—Å—Ç–≤–æ</a>
        </div>
        <button class="md:hidden text-white">
            <i class="fas fa-bars text-xl"></i>
        </button>
    </div>
</nav>
 

<!-- –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø –¥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ -->
<div class="mt-10"></div>

  <h2 class="text-4xl font-bold mb-6">
    <span style="background: linear-gradient(90deg, #ff4d4d 0%, #f9cb28 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
        –¢—Ä–µ–∫–µ—Ä
    </span>
    –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –∫–∞–ª–æ—Ä–∏–π
  </h2>

  <!-- –ë–ª–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å—É—Ç–æ—á–Ω–æ–π –Ω–æ—Ä–º—ã -->
  <div class="card-gradient goal-container">
    <h3 class="text-2xl font-bold mb-4 text-center">–í–∞—à–∞ —Å—É—Ç–æ—á–Ω–∞—è –Ω–æ—Ä–º–∞ –∫–∞–ª–æ—Ä–∏–π</h3>
    <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
      <input type="number" id="dailyGoalInput" min="1000" max="5000" step="50" value="1500" 
             class="goal-input">
      <button id="setGoalBtn" class="goal-btn">
        <i class="fas fa-check mr-2"></i>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
      </button>
    </div>
    <p class="text-gray-400 text-sm text-center mt-3">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: 1500-2500 –∫–∫–∞–ª/–¥–µ–Ω—å</p>
  </div>

  <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ -->
  <form id="productForm" class="card-gradient">
    <div class="grid-3">
      <div>
        <label for="productSelect">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞</label>
        <select id="productSelect" required>
          <option value="" selected disabled>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç</option>
          <option value="–û–≤—Å—è–Ω–∫–∞">–û–≤—Å—è–Ω–∫–∞</option>
          <option value="–ö—É—Ä–∏–Ω–æ–µ —Ñ–∏–ª–µ">–ö—É—Ä–∏–Ω–æ–µ —Ñ–∏–ª–µ</option>
          <option value="–Ø–±–ª–æ–∫–æ">–Ø–±–ª–æ–∫–æ</option>
          <option value="–ú–æ–ª–æ–∫–æ">–ú–æ–ª–æ–∫–æ</option>
          <option value="–¢–≤–æ—Ä–æ–≥">–¢–≤–æ—Ä–æ–≥</option>
          <option value="–†–∏—Å">–†–∏—Å</option>
          <option value="–ì—Ä–µ—á–∫–∞">–ì—Ä–µ—á–∫–∞</option>
          <option value="–ë–∞–Ω–∞–Ω">–ë–∞–Ω–∞–Ω</option>
          <option value="–Ø–π—Ü–æ">–Ø–π—Ü–æ</option>
          <option value="–ê–≤–æ–∫–∞–¥–æ">–ê–≤–æ–∫–∞–¥–æ</option>
          <option value="–õ–æ—Å–æ—Å—å">–õ–æ—Å–æ—Å—å</option>
          <option value="–û–≥—É—Ä–µ—Ü">–û–≥—É—Ä–µ—Ü</option>
          <option value="–ü–æ–º–∏–¥–æ—Ä">–ü–æ–º–∏–¥–æ—Ä</option>
          <option value="–ë—Ä–æ–∫–∫–æ–ª–∏">–ë—Ä–æ–∫–∫–æ–ª–∏</option>
          <option value="–ú–∏–Ω–¥–∞–ª—å">–ú–∏–Ω–¥–∞–ª—å</option>
          <option value="–§—É–Ω–¥—É–∫">–§—É–Ω–¥—É–∫</option>
          <option value="–ö–µ—Ñ–∏—Ä">–ö–µ—Ñ–∏—Ä</option>
          <option value="–ß–µ—á–µ–≤–∏—Ü–∞">–ß–µ—á–µ–≤–∏—Ü–∞</option>
          <option value="–ì—Ä—É—à–∞">–ì—Ä—É—à–∞</option>
          <option value="–°—ã—Ä">–°—ã—Ä</option>
          <option value="–¢—É–Ω–µ—Ü">–¢—É–Ω–µ—Ü</option>
          <option value="–ò–Ω–¥–µ–π–∫–∞">–ò–Ω–¥–µ–π–∫–∞</option>
          <option value="–ö–∏–≤–∏">–ö–∏–≤–∏</option>
          <option value="–ú–æ—Ä–∫–æ–≤—å">–ú–æ—Ä–∫–æ–≤—å</option>
          <option value="–§–∏–Ω–∏–∫–∏">–§–∏–Ω–∏–∫–∏</option>
        </select>
      </div>
      <div>
        <label for="productCalories">–ö–∞–ª–æ—Ä–∏–∏ –Ω–∞ 100 –≥</label>
        <input type="number" id="productCalories" min="0" step="1" placeholder="–ö–∫–∞–ª" required readonly />
      </div>
      <div>
        <label for="productWeight">–í–µ—Å —Å—ä–µ–¥–µ–Ω–Ω–æ–≥–æ (–≥)</label>
        <input type="number" id="productWeight" min="1" step="1" placeholder="–ì—Ä–∞–º–º—ã" required />
      </div>
    </div>
    <button type="submit" class="btn-primary">
      <i class="fas fa-plus-circle mr-2"></i>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç
    </button>
  </form>

  <!-- –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ -->
  <div class="card-gradient table-container">
    <table>
      <thead>
        <tr>
          <th>–ü—Ä–æ–¥—É–∫—Ç</th>
          <th>–ö–∞–ª–æ—Ä–∏–∏ –Ω–∞ 100 –≥</th>
          <th>–í–µ—Å (–≥)</th>
          <th>–ö–∞–ª–æ—Ä–∏–∏ –≤—Å–µ–≥–æ</th>
          <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
      </thead>
      <tbody id="productTableBody"></tbody>
      <tfoot>
        <tr>
          <td colspan="3" style="text-align: right;">–ò—Ç–æ–≥–æ –∫–∞–ª–æ—Ä–∏–π:</td>
          <td id="totalCalories">0</td>
          <td></td>
        </tr>
      </tfoot>
    </table>
  </div>

  <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–¥–∏–∞–≥—Ä–∞–º–º–∞ -->
  <section class="progress-container">
    <canvas id="calorieProgressChart" width="250" height="250"></canvas>
    <div class="progress-text" id="progressText">0 –∏–∑ 1500 –∫–∫–∞–ª</div>
    <div class="remaining-text" id="remainingText">–û—Å—Ç–∞–ª–æ—Å—å: 1500 –∫–∫–∞–ª</div>
  </section>

  <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
  <section class="recommendations">
    <div class="recommendation">üö∞ –ü–µ–π—Ç–µ 8 —Å—Ç–∞–∫–∞–Ω–æ–≤ –≤–æ–¥—ã –≤ –¥–µ–Ω—å</div>
    <div class="recommendation">üö∂‚Äç‚ôÇÔ∏è –•–æ–¥–∏—Ç–µ –º–∏–Ω–∏–º—É–º 10 000 —à–∞–≥–æ–≤</div>
    <div class="recommendation">üõèÔ∏è –°–ø–∏—Ç–µ –Ω–µ –º–µ–Ω–µ–µ 7 —á–∞—Å–æ–≤</div>
    <div class="recommendation">ü•¶ –í–∫–ª—é—á–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ–≤–æ—â–µ–π –≤ —Ä–∞—Ü–∏–æ–Ω</div>
  </section>

<script>
  // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
  const calTable = {
    '–û–≤—Å—è–Ω–∫–∞': 370,
    '–ö—É—Ä–∏–Ω–æ–µ —Ñ–∏–ª–µ': 165,
    '–Ø–±–ª–æ–∫–æ': 52,
    '–ú–æ–ª–æ–∫–æ': 42,
    '–¢–≤–æ—Ä–æ–≥': 120,
    '–†–∏—Å': 340,
    '–ì—Ä–µ—á–∫–∞': 330,
    '–ë–∞–Ω–∞–Ω': 89,
    '–Ø–π—Ü–æ': 155,
    '–ê–≤–æ–∫–∞–¥–æ': 160,
    '–õ–æ—Å–æ—Å—å': 208,
    '–û–≥—É—Ä–µ—Ü': 16,
    '–ü–æ–º–∏–¥–æ—Ä': 18,
    '–ë—Ä–æ–∫–∫–æ–ª–∏': 34,
    '–ú–∏–Ω–¥–∞–ª—å': 576,
    '–§—É–Ω–¥—É–∫': 628,
    '–ö–µ—Ñ–∏—Ä': 40,
    '–ß–µ—á–µ–≤–∏—Ü–∞': 353,
    '–ì—Ä—É—à–∞': 57,
    '–°—ã—Ä': 350,
    '–¢—É–Ω–µ—Ü': 132,
    '–ò–Ω–¥–µ–π–∫–∞': 145,
    '–ö–∏–≤–∏': 61,
    '–ú–æ—Ä–∫–æ–≤—å': 35,
    '–§–∏–Ω–∏–∫–∏': 277
  };

  // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã DOM
  const productSelect = document.getElementById('productSelect');
  const productCalories = document.getElementById('productCalories');
  const productWeight = document.getElementById('productWeight');
  const productForm = document.getElementById('productForm');
  const productTableBody = document.getElementById('productTableBody');
  const totalCaloriesElem = document.getElementById('totalCalories');
  const progressText = document.getElementById('progressText');
  const remainingText = document.getElementById('remainingText');
  const dailyGoalInput = document.getElementById('dailyGoalInput');
  const setGoalBtn = document.getElementById('setGoalBtn');

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
  let products = [];
  let goalCalories = 1500;

  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–π —Ü–µ–ª–∏ –ø–æ –∫–∞–ª–æ—Ä–∏—è–º
  setGoalBtn.addEventListener('click', () => {
    const newGoal = parseInt(dailyGoalInput.value);
    if (isNaN(newGoal) || newGoal < 1000 || newGoal > 5000) {
      alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç 1000 –¥–æ 5000 –∫–∫–∞–ª');
      return;
    }
    goalCalories = newGoal;
    updateProgress();
    saveToLocalStorage();
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏
    const notification = document.createElement('div');
    notification.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg';
    notification.innerHTML = `<i class="fas fa-check-circle mr-2"></i>–¶–µ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∞: ${goalCalories} –∫–∫–∞–ª`;
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.classList.add('opacity-0', 'transition-opacity', 'duration-500');
      setTimeout(() => notification.remove(), 500);
    }, 2000);
  });

  // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–ª–æ—Ä–∏–π –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ø—Ä–æ–¥—É–∫—Ç–∞
  productSelect.addEventListener('change', () => {
    const selected = productSelect.value;
    productCalories.value = calTable[selected] || '';
  });

  // –†–µ–Ω–¥–µ—Ä —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤
  function renderProducts() {
    productTableBody.innerHTML = '';
    let totalCalories = 0;

    products.forEach((product, index) => {
      const caloriesForWeight = (product.caloriesPer100g * product.weight) / 100;
      totalCalories += caloriesForWeight;

      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${product.name}</td>
        <td>${product.caloriesPer100g} –∫–∫–∞–ª</td>
        <td>${product.weight} –≥</td>
        <td>${caloriesForWeight.toFixed(1)} –∫–∫–∞–ª</td>
        <td><button class="btn-delete" title="–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç" onclick="removeProduct(${index})">&#128465;</button></td>
      `;
      productTableBody.appendChild(tr);
    });

    totalCaloriesElem.textContent = totalCalories.toFixed(1);
    updateProgress(totalCalories);
  }

  // –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
  function removeProduct(index) {
    products.splice(index, 1);
    renderProducts();
    saveToLocalStorage();
  }

  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞
  productForm.addEventListener('submit', e => {
    e.preventDefault();

    const name = productSelect.value;
    const caloriesPer100g = parseFloat(productCalories.value);
    const weight = parseFloat(productWeight.value);

    if (!name) {
      alert('–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç');
      return;
    }
    if (isNaN(caloriesPer100g) || caloriesPer100g <= 0) {
      alert('–ö–∞–ª–æ—Ä–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º');
      return;
    }
    if (isNaN(weight) || weight <= 0) {
      alert('–í–µ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º');
      return;
    }

    products.push({name, caloriesPer100g, weight});
    productForm.reset();
    productCalories.value = '';
    renderProducts();
    saveToLocalStorage();
  });

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
  const ctxProgress = document.getElementById('calorieProgressChart').getContext('2d');
  let progressChart = new Chart(ctxProgress, {
    type: 'doughnut',
    data: {
      labels: ['–°—ä–µ–¥–µ–Ω–æ', '–û—Å—Ç–∞—Ç–æ–∫'],
      datasets: [{
        data: [0, goalCalories],
        backgroundColor: ['#ff4d4d', '#444444'],
        borderWidth: 0,
        cutout: '80%',
      }]
    },
    options: {
      responsive: false,
      plugins: {
        legend: { display: false }
      },
      circumference: 360,
      rotation: -90,
      animation: { duration: 600 }
    }
  });

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
  function updateProgress(currentCalories = 0) {
    if(currentCalories > goalCalories) currentCalories = goalCalories;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∏–∞–≥—Ä–∞–º–º—É
    progressChart.data.datasets[0].data[0] = currentCalories;
    progressChart.data.datasets[0].data[1] = goalCalories - currentCalories;
    progressChart.update();

    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    progressText.textContent = `${currentCalories.toFixed(1)} –∏–∑ ${goalCalories} –∫–∫–∞–ª`;
    
    const remaining = goalCalories - currentCalories;
    remainingText.textContent = `–û—Å—Ç–∞–ª–æ—Å—å: ${remaining > 0 ? remaining.toFixed(1) : 0} –∫–∫–∞–ª`;
    
    // –ú–µ–Ω—è–µ–º —Å—Ç–∏–ª–∏ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
    if (remaining < 0) {
      remainingText.classList.add('over-limit');
      remainingText.classList.remove('remaining-text');
    } else {
      remainingText.classList.add('remaining-text');
      remainingText.classList.remove('over-limit');
    }
  }

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ localStorage
  function saveToLocalStorage() {
    const data = {
      products,
      goalCalories
    };
    localStorage.setItem('calorieTrackerData', JSON.stringify(data));
  }

  // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
  function loadFromLocalStorage() {
    const savedData = localStorage.getItem('calorieTrackerData');
    if (savedData) {
      const data = JSON.parse(savedData);
      products = data.products || [];
      goalCalories = data.goalCalories || 1500;
      dailyGoalInput.value = goalCalories;
      renderProducts();
    }
  }

  // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
  window.addEventListener('DOMContentLoaded', () => {
    loadFromLocalStorage();
  });

  // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—ã–∑–æ–≤–∞ –∏–∑ HTML
  window.removeProduct = removeProduct;

  document.getElementById('mobileMenuButton').addEventListener('click', function() {
    document.getElementById('mobileMenu').classList.toggle('active');
  })
</script>
</body>
</html>